package calculator;

import jdk.jshell.JShell;
import jdk.jshell.SnippetEvent;

import java.util.List;

public class Jshell {

    private JShell jshell;

    // Constructor to initialize JShell
    public Jshell() {
        jshell = JShell.builder().build();
    }

    // Method to evaluate a given string of Java code
    public void evaluate(String code) {
        List<SnippetEvent> events = jshell.eval(code);

        // Output results of the evaluation
        for (SnippetEvent event : events) {
            if (event.exception() != null) {
                System.out.println("Error in code: " + event.exception().getMessage());
            } else if (event.value() != null) {
                System.out.println("Result: " + event.value());
            } else {
                System.out.println("Snippet evaluated successfully.");
            }
        }
    }

    // Method to close the JShell session
    public void close() {
        jshell.close();
    }
}
